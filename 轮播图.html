<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>轮播图</title>
<link href="style.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="move.js"></script>
<script>
window.onload=function(){

	var oPrevDiv=document.getElementsByClassName('prev_div')[0];          	 /*获取左箭头，第0个*/
	var oNextDiv=document.getElementsByClassName('next_div')[0];          	 /*获取右箭头，第0个*/
	
	var aLi=document.getElementsByTagName('li');                           	 /*获取li*/
	
	var arr=[];   															 /*建立一个数组，用来存储li class不同样式的值*/
	
	for(var i=0;i<aLi.length;i++){
	
		var oImg=aLi[i].getElementsByTagName('img')[0];                      /*获取图片元素*/
		
		arr.push([parseInt(getStyle(aLi[i],'left')),parseInt(getStyle(aLi[i],'top')),getStyle(aLi[i],'opacity')*100,getStyle(aLi[i],'zIndex'),oImg.width]);
		
		//console.dir(arr);                                                  /*存的如何通过console来测试*/
	}
	                                                        
	oPrevDiv.onclick=function(){
		//alert(1);                                                          /*测试左箭头有没有触发*/
		arr.push(arr[0]);                    								 /*第一组添加到数组的最后*/
		arr.shift();                         								 /*删掉原来的第一组*/
		
		for(var i=0;i<aLi.length;i++){
		
			var oImg=aLi[i].getElementsByTagName('img')[0]; 
			
			aLi[i].style.zIndex=arr[i][3];
			
			startMove(aLi[i],{left:arr[i][0],top:arr[i][1],opacity:arr[i][2]});
			
			startMove(oImg,{width:arr[i][4]});
			
		}
	};
	oNextDiv.onclick=function(){
		//alert(2);                                                          /*测试右箭头有没有触发*/
		arr.unshift(arr[arr.length-1]);                    					 /*把最后一项添加到第一项*/
		arr.pop();                         									 /*删掉最后一组*/
		
		for(var i=0;i<aLi.length;i++){
		
			var oImg=aLi[i].getElementsByTagName('img')[0]; 
			
			aLi[i].style.zIndex=arr[i][3];
			
			startMove(aLi[i],{left:arr[i][0],top:arr[i][1],opacity:arr[i][2]});
			
			startMove(oImg,{width:arr[i][4]});
			
		}
		
	};
	
	function getStyle(obj,attr){             								/*获取一个元素的行间样式*/
		if(obj.currentStyle){
			return obj.currentStyle[attr];
		}
		else{
			return getComputedStyle(obj,false)[attr];
		}
	}

};
</script>
</head>

<body>
<div id="automatic">
	<div class="prev_div"></div>
	<a class="prev" href="###">
		<span class="ico1"></span>
		<span class="ico"></span>
		<span class="txt"></span>
	</a>
	<div class="next_div"></div>
	<a class="next" href="###">
		<span class="ico1"></span>
		<span class="ico"></span>
		<span class="txt"></span>
	</a>
	<ul>
		<li class="pos_0">
			<a href="###"><img src="images/8.jpg" width="100" alt="我的主页"/></a>
		</li>
		<li class="pos_1">
			<a href="###"><img src="images/1.jpg" width="270" alt="我的主页"/></a>
		</li>
		<li class="pos_2">
			<a href="###"><img src="images/2.jpg" width="510" alt="我的主页"/></a>
		</li>
		<li class="pos_3">
			<a href="###"><img src="images/3.jpg" width="680" alt="我的主页"/></a>
		</li>
		<li class="pos_4">
			<a href="###"><img src="images/4.jpg" width="510" alt="我的主页"/></a>
		</li>
		<li class="pos_5">
			<a href="###"><img src="images/5.jpg" width="270" alt="我的主页"/></a>
		</li>
		<li class="pos_6">
			<a href="###"><img src="images/6.jpg" width="270" alt="我的主页"/></a>
		</li>
		<li class="pos_7">
			<a href="###"><img src="images/7.jpg" width="100" alt="我的主页"/></a>
		</li>
	</ul>
</div>
</body>
</html>
